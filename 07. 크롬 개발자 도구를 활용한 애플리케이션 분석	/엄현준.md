## 7.1 크롬 개발자 도구란?

> 크롬에서 제공하는 개발자용 도구

웹 사이트를 제대로 디버깅하고 싶다면?

- **개인정보 보호 모드**이용
- 확장 프로그램이, 웹 페이지가 제공하지 않은 정보를 추가할 수 있음.

## 7.2 요소 탭

> HTML, CSS등의 정보 확인 가능

### 7.2.1 요소 화면

- 웹 페이지를 구성하는 HTML 보거나 조작 가능
- 클래스나 속성값이 동적으로 제어되는 DOM이 있다면 요소의 중단점을 이용해 디버깅 가능

### 7.2.2 요소 정보

> 요소와 관련된 정보들

확인할 수 있는 주요 내용

1. 스타일(style) - 설정된 스타일 정보 / 선언된 파일
2. 계산됨(computed) - 결과값을 알 수 있는 탭
3. 레이아웃: CSS 그리드나 레이아웃과 관련된 정보를 확인할 수 있음
4. 이벤트리스너
5. DOM 중단점
6. 속성
7. 접근성

## 7.3 소스 탭

- 웹 어플리케이션을 불러오기 위해 실행하거나 참조된 모든 파일 확인 가능
- 자바스크립트, CSS, HTML, 폰트 등 다양한 정보 확인 가능
- 중단점 생성하여, 디버깅 가능 (소스코드를 오염시키지 않으므로 더 유용)
  - 라이브러리 코드도 볼 수 있기 때문에 유용
- 자바스크립트에서 확인할 수 없는 스코프, 호출 스택 등 현재 자바스크립트가 실행되고 있는 구조도 확인할 수 있어 유용함.

<br>

**탭 오른쪽에 제공하는 정보와 기능**

1. 감시
   - 감시하고 싶은 변수를 선언하고, 해당 변수의 정보를 확인할 수 있다.
   - 디버깅 시점에서 특정 변수의 값을 알고 싶다면 이 감시를 활용하면 된다.
2. 중단점
   - 현재 웹 사이트에 추가한 중단점을 확인할 수 있다. 열려 있는 파일뿐만 아니라 웹 페이지 전체에 걸쳐 소스 탭에서 추가한 모든 중단점을 확인할 수 있다.
3. 범위
   - 이름 그대로 현재 중단점에서의 스코프를 의미.
   - 로컬은 현재 로컬 스코프를 의미.
   - 이 스코프에서 접근할 수 있는 값 확인 가능
   - 클로저, 전역 스코프 등 확인 가능
4. 호출스택
   - 현재 중단점의 콜스택을 확인할 수 있음
   - 이 메뉴를 활용하면 자바스크립트 코드가 실행되며 생성되는 실행 컨텍스트가 어떻게 저장되어 현재 어떤 모습을 하고 있는 지 직접 볼 수 있다.
5. 전역 리스너
   - 전역 스코프에 추가된 리스너 목록
6. XHR / 가져오기, DOM 중단점, 이벤트 리스너 중단점, CSP 위반 중단점
   - 소스의 중단점 이외에 다양한 중단점을 확인할 수 있다

## 7.4 네트워크 탭

- 해당 웹 페이지를 접속하는 순간부터 발생하는 네트워크 관련 작동이 기록된다.
- HTTP 요청부터 웹 소켓에 이르기까지, 웹 페이지가 외부 데이터와 통신하는 정보를 확인하고 싶다면 네트워크 탭을 참조하면 된다.

- 리소스 크기도 확인할 수 있음.

  → 리소스 크기가 크다면 gzip이나 brotli를 적절히 활용하기

- 스크린샷 기능
  → 사용자에게 먼저 노출되거나, 노출되는 영역이 큰 중요한 컨텐츠가 우선적으로 다운로드 되는 지를 확인할 수 있음
  → 의도적으로 페이지가 완성되어가는지 확인해보기
  **집중적으로 봐야할 점**
  1. 불필요한 요청 또는 중복되는 요청이 없는 지
  2. 웹페이지 구성에 필요한 리소스 크기가 너무 크지 않은지
  3. 리소스를 불러오는 속도는 적절한지 또는 너무 속도가 오래 걸리는 리소스는 없는지
  4. 리소스가 올바른 우선순위로 다운로드되어 페이지를 자연스럽게 만들어가는지

## 7.5 메모리 탭

### 7.5.1 자바스크립트 인스턴스 VM 선택

- 실행중인 VM 인스턴스 환경 선택할 수 있음.
- 환경별 힙의 크기 볼 수 있음

### 7.5.2 힙 스냅샷

- 현재 페이지의 메모리 상태를 볼 수 있는 메모리 프로파일 도구
- 많은 내용이 있다보니 필요한 정보를 찾기 힘듦
  → 확인하고 싶은 스크립트 전후로 실행하여 비교하는 것이 좋음.

### 7.5.3 타임라인 할당 계측

- 시간의 흐름에 따라 메모리 변화 확인

### 7.5.4 할당 샘플링

- 시간의 흐름에 따라 발생하는 메모리 점유 확인(타임라인과 비슷)
- 자바스크립트 실행 스태별 함수 단위 분석 가능
- 타임라인 할당계측과 비슷하지만 장기간 프로파일링 시 브라우저에게 주는 부담을 줄일 수 있음. (왜?)
- 메모리 누수가 짐작되지만, 정확한 위치를 찾기 어려워 장기간 프로파일링을 실행해야하는 경우 → 할당 샘플링 활용하는 것이 좋음

## 7.6 Next.js 환경 디버깅하기

> 서버 환경에서의 디버깅

### 7.6.1 Next.js 프로젝트를 디버그 모드로 실행하기

다음 명령어로 Next.js프로젝트를 실행 (디버거 모드)

**`“dev”: NODE_OPTIONS=’—inspect’ next dev`**

### 7.6.2 Next.js 서버에 트래픽 유입시키기

사용트래픽 테스트를 위해서 → ab 사용
