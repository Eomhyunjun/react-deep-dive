# 11 Next.js 13과 리액트 18

## app 디렉토리
app 디렉토리, layout

라우팅에 여러 기능들이 들어감. error, not-found, loading

`*/route.ts` 이라고 적으면 라우팅하는게 아니라 api로 작동

## 리액트 서버 컴포넌트
서버 컴포넌트와 서버 사이드 렌더링이라는 완전히 다른 개념이다.

### 기존 리액트 컴포넌트와 서버 사이드 렌더링의 한계
1. 자바스립트 번들 크기가 0인 컴포넌트 불가
2. 백엔드 리소스 직접 접근 불가
3. 자동 코드 분할 불가
4. 연쇄적으로 발생하는 클라이언트와 서버의 요청에 대응하기 어렵
5. 추상화 비용이 큼

### 서버 컴포넌트

서버에서 할 수 있는 일은 서버에서 하고, 나머지는 사용자 브라우져에서.

요청이 오면 그 순간 서버에서 딱 한번 실행되므로, 상태를 가질 수 없다.
렌더링 생명주기도 사용 못함, 한 번 랜더링 되면 끝
window, document 접근 불가
데이터베이스같은 서버 데이터에는 접근 가능
결과값이 html이 아니라 json

기본적으로는 리액트는 모든 것을 다 공용 컴포넌트로 판단. (모든 컴포넌트를 서버에서 실행 가능한 것으로 분류. `use client`라고 작성할 때는 뺴고)

### 서버 컴포넌트와 서버 사이드 렌더링의 차이

서버 사이트 렌더링
> html를 서버에서 만들어서 클라이언트에게 보냄. 정적 html을 빠르게 보내는게 목표


### Next.js에서의 리액트 서버 컴포넌트
모든 데이터 요청은 fetch 사용

```js
// app/page.txs
export const revalidate = 60;
```
모든 라우팅 페이지 60초마다 갱신

스트리밍을 활용해 점진적으로 페이지 불러오기
FCP 개선에 도움

### 터보팩

### 서버 액션
api를 만들지 않고 함수 수준에서 서버에 직접 접근해 데이터 요청 등을 수행할 수 있는 기능

기존 php와 다른 점: 페이지 새로고침없이 수행

# 정리

리액트 서버 컴포넌트는 새로운 패러다임, 프론트 개발자들에게 Node.js를 위시하는 서버 환경의 이해가 중요해짐