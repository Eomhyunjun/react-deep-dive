### 12장: 모든 웹 개발자가 관심을 가져야 할 핵심 웹 지표

#### 12.1 웹사이트와 성능
웹사이트 성능은 사용자 경험과 직접적으로 연결되며, 빠르고 안정적인 페이지 로딩은 이탈률 감소와 전환율 증가

이를 평가하기 위해 Google은 **Core Web Vitals**라는 사용자 중심의 성능 지표를 제안

---

#### 12.2 핵심 웹 지표(Core Web Vitals)란?
**Core Web Vitals**는 웹사이트 성능을 측정하기 위한 주요 지표로, 다음 세 가지를 포함합니다:
- **최대 콘텐츠풀 페인트(LCP)**: 페이지 주요 콘텐츠가 로드되는 시간.
- **최초 입력 지연(FID)**: 사용자 첫 상호작용에 대한 응답 시간.
- **누적 레이아웃 이동(CLS)**: 예기치 않은 레이아웃 이동 빈도.

---

### 12.3 최대 콘텐츠풀 페인트(LCP)

#### 12.3.1 정의
LCP는 사용자가 볼 수 있는 가장 큰 콘텐츠(예: 이미지, 텍스트 블록)가 화면에 완전히 렌더링되는 시간을 측정합니다.

#### 12.3.2 의미
LCP는 페이지 로드 속도를 나타내며, 사용자가 페이지를 사용할 준비가 되었음을 인식하는 데 중요한 역할을 합니다.

#### 12.3.3 예제
- Instagram 로고가 가장 큰 요소로 렌더링되는 경우.
- Google 검색 결과에서 텍스트 단락이 가장 큰 요소로 남아 있는 경우.

#### 12.3.4 기준 점수
- **Good**: 2.5초 이하
- **Needs Improvement**: 2.5~4초
- **Poor**: 4초 이상.

#### 12.3.5 개선 방안
- 이미지 및 텍스트 블록의 로딩 최적화.
    ```js
    <img>, <video poster="some.jpg" > 가 제일 빠름
    ```
    - 이미지 무손실 압축!
    - 클라이언트에서 빌드 ㄴ
    - 최대 콘텐츠풀 리소스는 가능하면 직접 호스팅
- 서버 응답 시간(TTFB) 단축.
- 렌더링 차단 리소스 제거.
---

### 12.4 최초 입력 지연(FID)

#### 12.4.1 정의
FID는 사용자가 페이지와 처음 상호작용(예: 버튼 클릭)한 시점부터 브라우저가 해당 이벤트를 처리하기 시작하는 데 걸리는 시간을 측정합니다.

#### 12.4.2 의미
FID는 페이지의 반응성을 나타내며, 특히 초기 로딩 시 사용자 경험에 큰 영향을 미칩니다. 나타나는 이유는 지금 메인 스레드가 다른 걸 하고 있기 때문

#### 12.4.3 예제
- 사용자가 버튼을 클릭했지만 브라우저가 이벤트를 처리하지 못해 지연이 발생하는 경우.

#### 12.4.4 기준 점수
- **Good**: 100ms 이하
- **Needs Improvement**: 100~300ms
- **Poor**: 300ms 이상.

#### 12.4.5 개선 방안
- JavaScript 실행 최적화 및 코드 분할
- 개발자도구에서 코드 커버리지를 확인 할 수 있음.
- 폴리필을 최적화하거나 인터넷 익스플로어 지원을 안 할 수도 있음
- 웹 워커(Web Worker) 사용으로 메인 스레드 부하 감소.

---

### 12.5 누적 레이아웃 이동(CLS)

#### 12.5.1 정의
CLS는 페이지 생명주기 동안 발생하는 모든 예기치 않은 레이아웃 이동을 측정합니다.

#### 12.5.2 의미
CLS는 시각적 안정성을 평가하며, 낮은 점수는 사용자 경험 향상에 기여합니다.

#### 12.5.3 예제
- 광고나 이미지가 비동기적으로 로드되어 콘텐츠가 갑자기 이동하는 경우.


#### 12.5.4 기준 점수
- **Good**: 0.1 이하
- **Needs Improvement**: 0.1~0.25
- **Poor**: 0.25 이상.

#### 12.5.5 개선 방안
- 이미지 및 동영상 크기 명시.
> 폰트 로딩 최적화필요
> `aspect-ratio`를 잘 이용하자.
> 반응형 이미지를 사용하고 싶으면 `srcset`속성 활용
https://developer.mozilla.org/en-US/docs/Web/HTML/Responsive_images

> picture와 차이점. picture는 사이즈에 따라 다른 그림으로 항상 전환, srcset는 최적화에 초점이 맞줘져 있기 떄문에 고화질 이미지가 이미 다운 받아졌다면 다시 로드하지 않음.

- 기존 콘텐츠 위에 새 콘텐츠 삽입 방지.
- 전환 애니메이션 사용으로 레이아웃 변경 최소화.

#### 12.5.6 핵심 웹 지표는 아니지만 성능 확인에 중요한 지표들
- **Time to First Byte (TTFB)**: 서버 응답 속도.
- **First Contentful Paint (FCP)**: 첫 번째 콘텐츠 표시 시간.

---

### 12.6 정리
핵심 웹 지표(LCP, FID, CLS)는 사용자 경험을 개선하기 위한 필수적인 도구입니다. 이를 최적화하면 더 빠르고 안정적인 웹사이트를 제공할 수 있습니다.
